<header class="py-5 z-50 bg-white/80 backdrop-blur-sm">

    <nav class="container fixed top-0 left-0 right-0  mx-auto px-6 h-20 flex items-center justify-between">

        <button (click)="onHackathon()"
            class="text-lg font-medium cinzel-links hover:text-gray-600 transition-colors">Hackathons</button>

        <button (click)="onLogo()">
            <app-logo-component></app-logo-component>
        </button>
        <button (click)="onProjects()" class="text-lg font-medium cinzel-links hover:text-gray-600 transition-colors">Projects</button>

    </nav>
    <div class="p-4 mt-8 text-center relative overflow-hidden">

        <!-- Cool animated background shapes, stays B/W to match theme, now CSS-animated for maximum compatibility -->
        <div class="absolute inset-0 flex justify-center items-center pointer-events-none opacity-20 z-0">
            <svg width="320" height="80" viewBox="0 0 320 80" fill="none"
                class="mx-auto">
                <rect id="bg-rect" x="20" y="20" width="280" height="40" rx="20" fill="#000" opacity="0.18"/>
                <circle id="bg-circle1" cx="50" cy="40" r="12" fill="#111" opacity="0.13"/>
                <circle id="bg-circle2" cx="270" cy="40" r="14" fill="#111" opacity="0.13"/>
            </svg>
        </div>
        <script>
            // Animate the SVG shapes using JavaScript for cross-browser support
            (() => {
                // Rectangle pulse (border radius rx)
                const rect = document.getElementById('bg-rect');
                let rectPulse = 0, rectForward = true;
                setInterval(() => {
                    let rx;
                    if(rectForward) {
                        rectPulse += 0.015;
                        if(rectPulse >= 1) { rectPulse = 1; rectForward = false; }
                    } else {
                        rectPulse -= 0.015;
                        if(rectPulse <= 0) { rectPulse = 0; rectForward = true; }
                    }
                    // 20 -> 8 -> 20
                    rx = 20 - 12 * rectPulse;
                    if(rect) rect.setAttribute("rx", rx.toFixed(2));
                }, 16);

                // Circle1 grow/shrink
                const circle1 = document.getElementById('bg-circle1');
                let c1Pulse = 0, c1Forward = true;
                setInterval(() => {
                    let r;
                    if(c1Forward) {
                        c1Pulse += 0.011;
                        if(c1Pulse >= 1) { c1Pulse = 1; c1Forward = false; }
                    } else {
                        c1Pulse -= 0.011;
                        if(c1Pulse <= 0) { c1Pulse = 0; c1Forward = true; }
                    }
                    // 12 -> 18 -> 12
                    r = 12 + 6 * c1Pulse;
                    if(circle1) circle1.setAttribute("r", r.toFixed(2));
                }, 16);

                // Circle2 shrink/grow
                const circle2 = document.getElementById('bg-circle2');
                let c2Pulse = 0, c2Forward = true;
                setInterval(() => {
                    let r;
                    if(c2Forward) {
                        c2Pulse += 0.009;
                        if(c2Pulse >= 1) { c2Pulse = 1; c2Forward = false; }
                    } else {
                        c2Pulse -= 0.009;
                        if(c2Pulse <= 0) { c2Pulse = 0; c2Forward = true; }
                    }
                    // 14 -> 10 -> 14
                    r = 14 - 4 * c2Pulse;
                    if(circle2) circle2.setAttribute("r", r.toFixed(2));
                }, 16);
            })();
        </script>
        <!-- Name and fade in intro -->
        <!-- Signature-style handwriting animation for "zama ndaba" -->
        <svg
            viewBox="0 0 440 70"
            width="355"
            height="56"
            class="mx-auto block relative z-10"
            style="max-width:100%;"
            aria-label="zama ndaba signature"
        >
            <g
                fill="none"
                stroke="#222"
                stroke-width="2.1"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <!-- "zama" path -->
                <path
                    id="sig-zama"
                    d="M18 48
                       q9-25 14 0
                       q4 25 12 0
                       q2-12  7-12 t7 12
                       m7-1
                       q2-19 7 0
                       q2 8 6 0
                       m7 1
                       q-1-13 7 0
                       q2 11 6 0
                       "
                    style="stroke-dasharray:370; stroke-dashoffset:370;"
                />

                <!-- "ndaba" path -->
                <path
                    id="sig-ndaba"
                    d="M80 50
                       q2-18 8 0
                       q2 13 7 0
                       m8 1
                       q1-13 7 0
                       q2 10 7 0
                       m8 0
                       q1-13 7 0
                       q2 10 7 0
                       m10 1
                       q1-10 6 0
                       t7 10
                       m7 0
                       q1-13 7 0
                       q2 10 7 0
                       "
                    style="stroke-dasharray:380; stroke-dashoffset:380;"
                />

                <!-- stylistic underline flourish -->
                <path 
                    id="sig-underline"
                    d="M20 62 Q120 90 170 56 Q260 16 426 52"
                    stroke="#4B5563"
                    stroke-width="1.2"
                    stroke-linecap="round"
                    style="stroke-dasharray:460;stroke-dashoffset:460;"
                />
            </g>
        </svg>
        <style>
            @keyframes sig-write {
                to { stroke-dashoffset: 0; }
            }
        </style>
        <script>
          (() => {
            // Animate signature handwriting using JS for best compatibility
            function animatePath(id, dashArray, delay, duration) {
                const el = document.getElementById(id);
                if(!el) return;
                el.style.strokeDasharray = dashArray;
                el.style.strokeDashoffset = dashArray;
                setTimeout(() => {
                    el.style.transition = `stroke-dashoffset ${duration}ms linear`;
                    el.style.strokeDashoffset = "0";
                }, delay);
            }
            animatePath("sig-zama", 370, 200, 2100);
            animatePath("sig-ndaba", 380, 1400, 2100);
            animatePath("sig-underline", 460, 2600, 1200);
          })();
        </script>

        <!-- Typewriter effect for the subtitle -->
        <p class="mt-3 text-gray-800 text-lg font-medium relative z-10 min-h-[28px]">
            <span id="typing-subtitle"></span>
        </p>

        <!-- Animated skill "cards" floating in, B&W theme -->
        <div class="flex justify-center gap-4 relative z-10"
            style="font-family: 'Cinzel', serif; font-weight:500">
            <span class="animate-skill-bounce shadow border border-black bg-white rounded-full px-5 py-2 mx-2 text-black text-base tracking-wider">Linux</span>
            <span class="animate-skill-bounce shadow border border-black bg-white rounded-full px-5 py-2 mx-2 text-black text-base tracking-wider [animation-delay:0.16s]">Security</span>
            <span class="animate-skill-bounce shadow border border-black bg-white rounded-full px-5 py-2 mx-2 text-black text-base tracking-wider [animation-delay:0.32s]">GenAI</span>
        </div>

        <!-- [Optional] Small "intermediate software developer" highlight underneath -->
        <div class="mt-4 text-xs uppercase tracking-widest text-gray-600 relative z-10 animate-fade-in-slow">
            <span class="inline-block border-black border px-3 py-1 rounded-lg bg-black text-white shadow-sm">
                Intermediate Software Developer
            </span>
        </div>

    </div>

    <!-- Animation styling -->
    <style>
        @keyframes typewriter {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blinkCaret {
            from, to { border-color: transparent }
            50% { border-color: #222 !important; }
        }
        .animate-typewriter #typing-subtitle {
            display: inline-block;
            overflow: hidden;
            border-right: .12em solid #222 !important;
            white-space: nowrap;
            letter-spacing: .05em;
            animation: typewriter 1.6s steps(32, end) 0.5s 1 normal both,
                        blinkCaret 750ms steps(2, start) infinite;
            min-width: 260px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(28px);}
            to { opacity: 1; transform: none;}
        }
        .animate-fade-in {
            animation: fadeIn 1.0s cubic-bezier(0.39, 0.575, 0.565, 1) both;
        }
        .animate-fade-in-slow {
            animation: fadeIn 1.6s 0.55s cubic-bezier(0.39,0.575,0.565,1) both;
        }

        @keyframes skillBounce {
            0% { transform: translateY(34px) scale(.8); opacity: 0;}
            50% { transform: translateY(-8px) scale(1.09);}
            70% { transform: translateY(2px) scale(1);}
            100% { transform: none; opacity: 1;}
        }
        .animate-skill-bounce {
            animation: skillBounce 1.4s cubic-bezier(0.45,0.12,0.25,1.0) both;
        }

        /* slow pulse animation for SVG bg */
        @keyframes pulseSlow {
            0%, 100% { opacity:0.10;}
            50% { opacity:0.18;}
        }
        .animate-pulse-slow {
            animation: pulseSlow 4s ease-in-out infinite;
        }
    </style>

    <!-- Typewriter subtitle, JS for typing out -->
    <script>
        (() => {
            const text = "An IT Specialist who happens to build systems too.";
            let i = 0;
            const target = document.getElementById("typing-subtitle");
            if (!target) return;
            target.textContent = '';
            function type() {
                if (i < text.length) {
                    target.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, 30);
                }
            }
            setTimeout(type, 400);
        })();
    </script>
    <div class="flex flex-wrap justify-center gap-2">
        <div class="flex flex-wrap gap-2 justify-center">
            @for (techstackimg of theTech(); track $index) {
            <span class="rounded-full  pill-point px-3 py-1 text-xs font-medium">
                <a [href]="techstackimg.title" target="_blank" rel="noopener noreferrer"><img
                        [src]="techstackimg.icoImagUrl" [alt]="techstackimg" height="24" width="24" srcset=""></a>
            </span>
            }

        </div>
    </div>
</header>